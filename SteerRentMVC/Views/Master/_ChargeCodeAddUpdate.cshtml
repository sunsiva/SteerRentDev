@model SteerRent.Model.ChargeCodeModel

@{
    var isServiceType = @Model.ServiceChargeType =="F"? true : false;
    var isPerc = @Model.ServiceChargeType =="P" ? true : false;
    var isFixedValue = (@isServiceType == true ? @Model.ServiceCharge : 0);
    var isPercValue = (@isPerc == true ? @Model.ServiceCharge : 0);
    }
<div id="ChargeCodeAddUpdate">
    <form name="frmChargeCode" id="frmChargeCode" method="get">
                                            <div class="contain_row">
                                        	<h5 class="contain_title">Add/Update Charge Code</h5>   
                                            <div class="contain_sub_row">
                                            	<div class="contain_left_part">
                                                <p class="label_part">Code <span>*</span></p>
                                                    <div class="label_input_part">
                                                        <input name="txtChargeCodeID" id="txtChargeCodeID"  value="@Model.ChargeCodeID" type="hidden">
                                                        <input name="txtChargeCode" id="txtChargeCode" class="alpha"  value="@Model.ChargeCode" type="text" placeholder="">
                                                    </div>
                                                    <div class="clear"></div>
                                                </div>
                                            	<div class="contain_left_part">
                                                	
                                                    <div class="clear"></div>
                                                </div>
                                            	<div class="clear"></div>                                                                                                
                                            </div>
                                            <div>&nbsp;</div>
                                            <div class="contain_sub_row">
                                            	<p class="label_part">Description <span>*</span></p>
                                                <div class="label_textarea_part">
                                                    <textarea name="txtChargeCodeDesc" class="label_part" id="txtChargeCodeDesc">@Model.ChargeCodeDesc</textarea>
                                                </div>

                                                <div class="clear"></div>
                                            </div>

                                            <div>&nbsp;</div>
                                            <div class="contain_sub_row">
                                            	<div class="contain_left_part">
                                                <p class="label_part">Label TBD <span></span></p>
                                                    <div class="label_combo_part">
                                                        <label class="label_radio"><input name="chkGroupDriven" id="chkGroupDriven" checked="@Model.GroupDriven" type="checkbox" value="GroupDriven"> Group Driven</label><br />
                                                        <label class="label_radio"><input name="chkUnitDriven" id="chkUnitDriven" checked="@Model.UnitDriven" type="checkbox" value="UnitDriven"> Unit Driven</label><br />
                                                        <label class="label_radio"><input name="chkAdhoc" id="chkAdhoc" checked="@Model.AdhocValue" type="checkbox" value="Adhoc"> Adhoc</label>
                                                    </div>
                                                    <div class="clear"></div>
                                                </div>
                                            	<div class="contain_left_part">
                                                    
                                                    <div class="clear"></div>
                                                </div>
                                            	<div class="clear"></div>                                                                                                
                                            </div>
                                            <div>&nbsp;</div>
                                            <div>&nbsp;</div>
                                            <div class="contain_sub_row">
                                            	<div class="contain_left_part">
                                                <p class="label_part">Label TBD <span></span></p>
                                                    <div class="label_combo_part">
                                                        <label class="label_radio"><input name="chkInsurance" id="chkInsurance" type="checkbox" checked="@Model.IsInsurance" value="Insurance"> Insurance</label><br />
                                                        <label class="label_radio"><input name="chkRental" id="chkRental" checked="@Model.IsRental" type="checkbox" value="Rental"> Rental</label><br />
                                                        <label class="label_radio"><input name="chkDiscount" id="chkDiscount"  type="checkbox" value="Discount"> Discount</label><br />
                                                        <label class="label_radio"><input name="chkNonRental" type="checkbox" id="chkNonRental" checked="@Model.IsNonRental" value="NonRental"> Non Rental</label><br />
                                                        <label class="label_radio"><input name="chkTrafficViolation" id="chkTrafficViolation" checked="@Model.IsTrafficViolation" type="checkbox" value="TrafficViolation"> Traffic Violation</label><br />
                                                        <label class="label_radio"><input name="chkOtherCompliance" id="chkOtherCompliance" checked="@Model.IsOtherCompliance" type="checkbox" value="OtherCompliance"> Other Compliance</label><br />
                                                        <label class="label_radio"><input name="chkVASWhileRenting" type="checkbox" id="chkVASWhileRenting" checked="@Model.IsVasWhileRenting" value="VASWhileRenting"> VAS While Renting</label><br />
                                                        <label class="label_radio"><input name="chkVASWhileClosing" type="checkbox" id="chkVASWhileClosing" checked="@Model.IsVasWhileClosing" value="VASWhileClosing"> VAS While Closing</label><br />
                                                        <label class="label_radio"><input name="chkServiceChargesApplicable" id="chkServiceChargesApplicable" checked="@Model.ServiceChargeApplicable" type="checkbox" value="ServiceChargesApplicable"> Service Charges Applicable</label><br />
                                                        <img align="left" src="/images/tab.png" /><label class="label_radio"><input name="radServiceType" id="radServiceTypeFixed" type="radio" checked="@isServiceType" value="Fixed"> Fixed </label><br />
                                                        <img align="left" src="/images/tab.png" /><input name="txtServiceChargeFixed" value="@isFixedValue" id="txtServiceChargeFixed" class="numeric" type="text" style="width:50px;height:20px;padding:5px 8px;display:block;outline:none;background:none;font-family:Arial, Helvetica, sans-serif;color:#000;border:1px solid #ccc;"><br />
                                                        <img align="left" src="/images/tab.png" /><label class="label_radio"><input name="radServiceType" id="radServiceTypePerc" type="radio" checked="@isPerc" value="Percentage"> Percentage </label><br />
                                                        <img align="left" src="/images/tab.png" /><input name="txtServiceChargePerc" id="txtServiceChargePerc" value="@isPercValue" class="numeric" type="text" style="width:50px;height:20px;padding:5px 8px;display:block;outline:none;background:none;font-family:Arial, Helvetica, sans-serif;color:#000;border:1px solid #ccc;"><br />
                                                    </div>
                                                    
                                                    <div class="clear"></div>
                                                </div>
                                            	<div class="contain_left_part">
                                                    <p class="label_part"><span></span></p>
                                                    <div class="label_combo_part">
                                                        <label class="label_radio"><input name="chkVAS" id="chkVAS" checked="@Model.IsOtherVas" type="checkbox" value="VAS"> Value Added Services</label><br />
                                                        <label class="label_radio"><input name="chkDeductible" id="chkDeductible" checked="@Model.IsDeductible" type="checkbox" value="Deductible"> Deductible on Accident/Damage</label><br />
                                                            <img align="left" src="/images/tab.png" /><input name="txtDeductibleAccident" class="numeric"  value="@Model.WaivingPercentage"  id="txtDeductibleAccident" type="number" style="width:50px;height:20px;padding:5px 8px;display:block;outline:none;background:none;font-family:Arial, Helvetica, sans-serif;color:#000;border:1px solid #ccc;">
                                                    </div>
                                                    <div class="clear"></div>
                                                </div>
                                            	<div class="clear"></div>                 
                                            </div>
                                             <div>&nbsp;</div>
                                            <div>&nbsp;</div>
                                            <div class="contain_sub_row">
                                            	<div class="contain_left_part">
                                                <p class="label_part">&nbsp;<span></span></p>
                                                    <div class="label_combo_part">
                                                        <label class="label_radio"><input name="chkActivate" id="chkActivate" checked="@Model.IsActive" type="checkbox" value="Activate"> Activate this Charge Code</label>
                                                        </div>
                                                    <div class="clear"></div>
                                                </div>
                                            	<div class="contain_left_part">
                                                    <p class="label_part">&nbsp;<span></span></p>
                                                    <div class="label_input_part">
                                                    </div>                                                    
                                                    <div class="clear"></div>
                                                </div>
                                            	<div class="clear"></div>                                                                                                
                                            </div>
                                        </div>                                                                          
                                        
                                        <div class="submit_part">
                                            <div class="contain_submit_row">
                                                @if(Model.ChargeCodeID >0)
                                                {
                                                    <button type="button" id="btnSubmitUpdA5" class="submit_btn" value="Submit">Update</button>
                                                }
                                                else
                                                {<button type="button" id="btnSubmitA5" class="submit_btn" value="Submit">Submit</button> }
                                                <button type="button" class="addnew_btn" onclick="fnCCAddUpdate(0)" value="Add New">Add New</button>
                                            </div>
                                        </div>
        </form>
</div>

<script>

    //function fnServiceTypeEnableFixed()
    //{
    //    if ($('#radServiceType').checked)
    //    { }
    //    else
    //    { }
    //}

    $(function () {
        $(".numeric").attr("maxlength", 11)
        $(".alpha").attr("maxlength", 20)
        $(".email").attr("maxlength", 20)
        $(".alphaNumeric").attr("maxlength", 30)
        $("#txtChargeCodeDesc").attr("maxlength", 45)

        $("#txtChargeCodeDesc").bind("keypress", function (e) {
            var str = /[a-zA-Z0-9,./ ]/;
            return globalValidation(e, str);
        });
        
        $(".numeric").bind("keypress", function (e) {
            var str = /[0-9,.+-]/;
            return globalValidation(e, str);
        });

        $(".numeric").bind("paste", function (e) {
            return false;
        });
        $(".numeric").bind("drop", function (e) {
            return false;
        });

        $(".alpha").bind("keypress", function (e) {
            var str = /[a-zA-Z ]/;
            return globalValidation(e, str);
        });

        $(".alphaNumeric").bind("keypress", function (e) {
            var str = /[a-zA-Z0-9,./ #]/;
            return globalValidation(e, str);
        });
    });

    // bind slider
    var slidetabs = $('#slidetabs').slidetabs({
        orientation: 'horizontal',
        autoHeight: true,
        touchSupport: true
    });

    $('#btnSubmitA5').click(function () {
        if (ccValidate()) {
            ChargeCodeInsertUpdate(true);
        }
        else {
            slidetabs.setContentHeight();
            return false;
        }
    });

    $('#btnSubmitUpdA5').click(function () {
        if (ccValidate()) {
            ChargeCodeInsertUpdate(false);
        }
        else
            return false;
    });

    function ChargeCodeInsertUpdate(isInsert) {
        var href;
        if (isInsert) {
            href = '@Url.Action("ChargeCodeInsert")';
        } else { href = '@Url.Action("ChargeCodeUpdate")'; }
        var frm = $('#frmChargeCode').serialize();
        $.ajax({
            url: href,
            data: $('#frmChargeCode').serialize(),
            type: "POST",
            datatype: "json",
            traditional: true,
            success: function (data) {
                if (data.length > 0) {
                    if (data[0].isCCExist)
                    {
                        $('.error_msg_exist').css('display', 'block');
                        $('.error_msg_bg').css("display", "block");
                    }
                    else {
                        $('#grdChargeCodes').html(data);
                        $('.error_msg_exist').css('display', 'none');
                        $('.error_msg_bg').css("display", "none");
                    }
                }
                $('.error_msg_sm').css("display", "none");
                $('.error_msg_spclchar').css("display", "none");
                $('.error_msg_error').css("display", "none");
                slidetabs.setContentHeight();
            },
            error: function (jqXhr, textStatus, errorThrown) {
                $('#errMsg').show();
                $('.error_msg_bg').css("display", "block");
                $('.error_msg_error').css("display", "block");
                slidetabs.setContentHeight();
            }
        });
    }

    function ccValidate() {
        if ($('#txtChargeCode').val() != '' && $('#txtChargeCodeDesc').val() != '') {
            slidetabs.setContentHeight();
            return true;
        } else {
            $('.error_msg_bg').css("display", "block");
            $('.error_msg_sm').css("display", "block");
            slidetabs.setContentHeight();
            return false;
        }
    }
</script>