@model SteerRent.Model.LocationModel

<div id="locAddUpdate">
    <form method="get" id="frmLoc">
<div class="contain_row">
      @{ if (Model.LocationId > 0){ 
    <h5 class="contain_title">Update Location</h5>}
       else
       {<h5 class="contain_title">Add Location</h5>} 
        }
    <div class="contain_sub_row">
        <div class="contain_left_part">
            <p class="label_part">Location Name <span>*</span></p>
            <div class="label_input_part">
                @*@Html.TextBoxFor(model => model.lstLocation[0].LocationName, new { name = "txtLocationName", id = "txtLocationName", placeholder = "Location Name" })*@
                @Html.HiddenFor(model => model.lstLocation[0].LocationId)
                <input name="txtLocationName" id="txtLocationName" type="text" value="@Model.LocationName" />
            </div>
            <div class="clear"></div>
        </div>
        <div class="contain_left_part">
            <p class="label_part">Location Code <span>*</span></p>
            <div class="label_input_part">
                <input name="txtLocationCode" id="txtLocationCode" type="text" value="@Model.LocationCode" />
            </div>
            <div class="clear"></div>
        </div>
        <div class="clear"></div>
    </div>
    <div>&nbsp;</div>
    <div>&nbsp;</div>
    <div class="contain_sub_row">
        <div class="contain_left_part">
            <p class="label_part">Address Line 1 <span>*</span></p>
            <div class="label_input_part">
                <input name="txtAddressLine1" id="txtAddressLine1" type="text" placeholder="" value="" />
            </div>
            <div class="clear"></div>
        </div>
        <div class="contain_left_part">
            <p class="label_part">Address Line 2 <span>*</span></p>
            <div class="label_input_part">
                <input name="txtAddressLine2" id="txtAddressLine2" type="text" placeholder="" />
            </div>
            <div class="clear"></div>
        </div>
        <div class="clear"></div>
    </div>
    <div>&nbsp;</div>
    <div class="contain_sub_row">
        <div class="contain_left_part">
            <p class="label_part">Address Line 3 <span></span></p>
            <div class="label_input_part">
                <input name="txtAddressLine3" id="txtAddressLine3" type="text" placeholder="" />
            </div>
            <div class="clear"></div>
        </div>
        <div class="contain_left_part">
            <p class="label_part">City <span>*</span></p>
            <div class="label_input_part">
            </div>
            <div class="clear"></div>
        </div>
        <div class="clear"></div>
    </div>
    <div>&nbsp;</div>
    <div class="contain_sub_row">
        <div class="contain_left_part">
            <p class="label_part">Country <span>*</span></p>
            <div class="label_combo_part">
                <select name="ddlCountry">
                    <option>-- Select -- </option>
                </select>
            </div>
            <div class="clear"></div>
        </div>
        <div class="contain_left_part">
            <p class="label_part">State/Emirate <span>*</span></p>
            <div class="label_combo_part">
                <select name="ddlStateEmirate">
                    <option>-- Select -- </option>
                </select>
            </div>
            <div class="clear"></div>
        </div>
        <div class="clear"></div>
    </div>
    <div>&nbsp;</div>
    <div class="contain_sub_row">
        <div class="contain_left_part">
            <p class="label_part">Pin/Zip <span></span></p>
            <div class="label_input_part">
                <input name="txtPinZip" id="txtPinZip" type="text" placeholder="" value="" />
            </div>
            <div class="clear"></div>
        </div>
        <div class="contain_left_part">
            <div class="clear"></div>
        </div>
        <div class="clear"></div>
    </div>
    <div>&nbsp;</div>
    <div>&nbsp;</div>
    <div class="contain_sub_row">
        <div class="contain_left_part">
            <p class="label_part">Location Incharge <span>*</span></p>
            <div class="label_combo_part">
                <select name="ddlLocationIncharge">
                    <option>-- Select -- </option>
                </select>
            </div>
            <div class="clear"></div>
        </div>
        <div class="contain_left_part">
            <p class="label_part">Designation <span></span></p>
            <div class="label_input_part">
                @*<input name="txtDesignation" disabled type="text" placeholder="RO value. Fetch from Emp Master" value="" />*@
                <input name="txtDesignation" id="txtDesignation" type="text" placeholder="" value="" />
            </div>
            <div class="clear"></div>
        </div>
        <div class="clear"></div>
    </div>
    <div>&nbsp;</div>
    <div class="contain_sub_row">
        <div class="contain_left_part">
            <p class="label_part">Landline No. <span>*</span></p>
            <div class="label_input_part">
                <input name="txtLandlineNo" id="txtLandlineNo" type="number" value="@Model.Phone" />
            </div>
            <div class="clear"></div>
        </div>
        <div class="contain_left_part">
            <p class="label_part">Mobile No. <span>*</span></p>
            <div class="label_input_part">
                <input name="txtMobile" id="txtMobile" type="number" value="@Model.Phone" />
            </div>
            <div class="clear"></div>
        </div>
        <div class="clear"></div>
    </div>
    <div>&nbsp;</div>
    <div class="contain_sub_row">
        <div class="contain_left_part">
            <p class="label_part">E-Mail ID <span>*</span></p>
            <div class="label_input_part">
                <input name="txtEmail" id="txtEmail" type="email" placeholder="" value="@Model.Email" />
            </div>
            <div class="clear"></div>
        </div>
        <div class="contain_left_part">
            <p class="label_part">Fax No. <span></span></p>
            <div class="label_input_part">
                <input name="txtFax" id="txtFax" type="number" value="@Model.Fax" />
            </div>
            <div class="clear"></div>
        </div>
        <div class="clear"></div>
    </div>
    <div>&nbsp;</div>
    <div>&nbsp;</div>
    <div class="contain_sub_row">
        <div class="contain_left_part">
            <p class="label_part">Working Hrs - From <span>*</span></p>
            <div class="label_input_part">
                <input name="txtWorkingTimeFrom" id="txtWorkingTimeFrom" type="number" value="@Model.WorkFrom" />
            </div>
            <div class="clear"></div>
        </div>
        <div class="contain_left_part">
            <p class="label_part">Working Hrs - To <span>*</span></p>
            <div class="label_input_part">
                <input name="txtWorkingTimeTo" id="txtWorkingTimeTo" type="number" value="@Model.WorksTill"/>
            </div>
            <div class="clear"></div>
        </div>
        <div class="clear"></div>
    </div>
    <div>&nbsp;</div>
    <div>&nbsp;</div>
    <div class="contain_sub_row">
        <div class="contain_left_part">
            <p class="label_part">Location Type <span>*</span></p>
            <div class="label_combo_part">
                <label class="label_radio">
                    <input name="chkRevenue" id="chkRevenue" type="checkbox" value="Revenue"  />
                    Revenue</label></br>
                        <label class="label_radio">
                            <input name="chkCounter" id="chkCounter" type="checkbox" value="Counter" />
                            Counter</label></br>
                        <label class="label_radio">
                            <input name="chkWorkshop" id="chkWorkShop" type="checkbox" value="Workshop" />
                            Workshop</label></br>
                        <label class="label_radio">
                            <input name="chkVirtual" type="checkbox" id="chkVirtual" value="Virtual" />
                            Virtual</label>
            </div>
            <div class="clear"></div>
        </div>
        <div class="contain_left_part">
            <p class="label_part">Operations <span>*</span></p>
            <div class="label_combo_part">
                <label class="label_radio">
                    <input name="chkRenting" type="checkbox" value="Revenue" />
                    Renting Allowed</label></br>
                    <label class="label_radio">
                    <input name="chkLeasing" type="checkbox" value="Counter" />
                    Leasing Allowed</label></br>   
            </div>
            <div class="clear"></div>
        </div>
        <div class="clear"></div>
    </div>
    <div>&nbsp;</div>
    <div>&nbsp;</div>
    <div class="contain_sub_row">
        <div class="contain_left_part">
            <p class="label_part">Receipt No. Start <span>*</span></p>
            <div class="label_input_part">
                <input name="txtRecNoStart" id="txtRecNoStart" type="text" placeholder="" value="@Model.ReciptNoStart" />
            </div>
            <div class="clear"></div>
        </div>
        <div class="contain_left_part">
            <p class="label_part">Receipt No. Current <span>*</span></p>
            <div class="label_input_part">
                <input name="txtRecNoCurrent" id="txtRecNoCurrent" type="text" placeholder="" value="@Model.ReceiptNoCurrent" />
            </div>
            <div class="clear"></div>
        </div>
        <div class="clear"></div>
    </div>
    <div>&nbsp;</div>
    <div class="contain_sub_row">
        <div class="contain_left_part">
            <p class="label_part">Rental Agmt No. Start <span>*</span></p>
            <div class="label_input_part">
                <input name="txtRentAgmtNoStart" id="txtRentAgmtNoStart" type="text" placeholder="" value="@Model.RentalAgreementNoCurrent" />
            </div>
            <div class="clear"></div>
        </div>
        <div class="contain_left_part">
            <p class="label_part">Rental Agmt No. Current <span>*</span></p>
            <div class="label_input_part">
                <input name="txtRentAgmtNoCurrent" id="txtRentAgmtNoCurrent" type="text" placeholder="" value="@Model.RentalAgreementNoCurrent" />
            </div>
            <div class="clear"></div>
        </div>
        <div class="clear"></div>
    </div>
    <div>&nbsp;</div>
    <div class="contain_sub_row">
        <div class="contain_left_part">
            <p class="label_part">Lease Agmt No. Start <span>*</span></p>
            <div class="label_input_part">
                <input name="txtLeaseAgmtNoStart" id="txtLeaseAgmtNoStart" type="text" placeholder="" value="@Model.LeaseAgreementNoStart" />
            </div>
            <div class="clear"></div>
        </div>
        <div class="contain_left_part">
            <p class="label_part">Lease Agmt No. Current <span>*</span></p>
            <div class="label_input_part">
                <input name="txtLeaseAgmtNoCurrent" id="txtLeaseAgmtNoCurrent" type="text" placeholder="" value="@Model.LeaseAgreementNoCurrent" />
            </div>
            <div class="clear"></div>
        </div>
        <div class="clear"></div>
    </div>
</div>
    
<div class="submit_part">
    <div class="contain_submit_row">
         @{ if (Model.LocationId > 0){ 
                <input type="button" id="btnSubmitUpdA4" class="submit_btn" value="Update" />
                <input type="button" id="btnAddNewA4" onclick="fnLocAddUpdate(0)" class="addnew_btn" value="Add New" />}
            else
            {<input type="button" id="btnSubmitA4" class="submit_btn" value="Submit" />
            } 
        }
        
    </div>
</div>
        </form>
   </div> 
<script>

    $('#btnSubmitA4').click(function () {
        
        if (locValidate()) {
           LocInsertUpdate();
        }
        else
            return false;
    });

    $('#btnSubmitUpdA4').click(function () {
        if (locValidate()) {
            LocInsertUpdate();
        }
        else
            return false;
    });

    function LocInsertUpdate()
    {
        var locFormData = $('#frmLoc').serialize() 
        debugger;
        var href = '@Url.Action("LocationInsert")';
        $.ajax({
            url: href,
            data:locFormData,isRevenue: $('#chkRevenue').attr("checked") ? true : false,
            type: "POST",
            datatype: "json",
            traditional: true,
            success: function (data) {
               // alert('Successfully inserted.');
            },
            error: function (jqXhr, textStatus, errorThrown) {
                $('#errMsg').show();
                //alert("Error:Action is aborted.Please try again later.");
            }
        });
    }

    function locValidate()
    {
        alert($('#txtLocationName').val());
        if ($('#txtLocationName').val() != '' && $('#txtLocationCode').val() != '')// && $('#txtAddressLine1').val() > 0 && $('#txtAddressLine2').val() > 0 && $('#txtAddressLine3').val() > 0 //&& $('#ddlCountry').val() > 0 && $('#ddlStateEmirate').val() > 0 && $('#txtPinZip').val() > 0 && $('#ddlLocationIncharge').val() > 0
           //&& $('#txtDesignation').val() > 0 && $('#txtLandlineNo').val() > 0 && $('#txtMobile').val() > 0 && $('#txtEmail').val() > 0 && $('#txtFax').val() > 0
            //&& $('#txtWorkingTimeFrom').val() > 0 && $('#txtWorkingTimeTo').val() > 0 && $('#txtRecNoStart').val() > 0 && $('#txtRecNoCurrent').val() > 0 && $('#txtRentAgmtNoStart').val() > 0 && $('#txtRentAgmtNoCurrent').val() > 0 && $('#txtLeaseAgmtNoStart').val() > 0 && $('#txtLeaseAgmtNoCurrent').val() > 0)
        {
            return true;} else {
            $('.error_msg_bg').css("display", "block");
            $('.error_msg_sm').css("display", "block");
            return false;
        }
    }
</script>
    