@model SteerRent.Model.LocationModel

<div id="locAddUpdate">
    <form method="get" id="frmLoc">
<div class="contain_row">
      @{ if (Model.LocationId > 0){ 
    <h5 class="contain_title">Update Location</h5>}
       else
       {<h5 class="contain_title">Add Location</h5>} 
        }
    <div class="contain_sub_row">
        <div class="contain_left_part">
            <p class="label_part">Location Name <span>*</span></p>
            <div class="label_input_part">
                @*@Html.TextBoxFor(model => model.lstLocation[0].LocationName, new { name = "txtLocationName", id = "txtLocationName", placeholder = "Location Name" })*@
                @Html.HiddenFor(model => model.lstLocation[0].LocationId)
                <input name="txtLocationName" id="txtLocationName" type="text" value="@Model.LocationName" />
            </div>
            <div class="clear"></div>
        </div>
        <div class="contain_left_part">
            <p class="label_part">Location Code <span>*</span></p>
            <div class="label_input_part">
                <input name="txtLocationCode" id="txtLocationCode" type="text" value="@Model.LocationCode" />
            </div>
            <div class="clear"></div>
        </div>
        <div class="clear"></div>
    </div>
    <div>&nbsp;</div>
    <div>&nbsp;</div>
    <div class="contain_sub_row">
        <div class="contain_left_part">
            <p class="label_part">Address Line 1 <span>*</span></p>
            <div class="label_input_part">
                <input name="txtAddressLine1" id="txtAddressLine1" type="text" placeholder="" value="" />
            </div>
            <div class="clear"></div>
        </div>
        <div class="contain_left_part">
            <p class="label_part">Address Line 2 <span>*</span></p>
            <div class="label_input_part">
                <input name="txtAddressLine2" id="txtAddressLine2" type="text" placeholder="" />
            </div>
            <div class="clear"></div>
        </div>
        <div class="clear"></div>
    </div>
    <div>&nbsp;</div>
    <div class="contain_sub_row">
        <div class="contain_left_part">
            <p class="label_part">Address Line 3 <span></span></p>
            <div class="label_input_part">
                <input name="txtAddressLine3" id="txtAddressLine3" type="text" placeholder="" />
            </div>
            <div class="clear"></div>
        </div>
        <div class="contain_left_part">
            <p class="label_part">City <span>*</span></p>
            <div class="label_input_part">
                <input name="txtLocCity" id="txtLocCity" type="text" placeholder="" />
            </div>
            <div class="clear"></div>
        </div>
        <div class="clear"></div>
    </div>
    <div>&nbsp;</div>
    <div class="contain_sub_row">
        <div class="contain_left_part">
            <p class="label_part">Country <span>*</span></p>
            <div class="label_combo_part">
                <select name="ddlLocCountry" id="ddlLocCountry"></select>
            </div>
            <div class="clear"></div>
        </div>
        <div class="contain_left_part">
            <p class="label_part">State/Emirate <span>*</span></p>
            <div class="label_combo_part">
                 <select name="ddlLocStateEmirate" id="ddlLocStateEmirate"></select>
            </div>
            <div class="clear"></div>
        </div>
        <div class="clear"></div>
    </div>
    <div>&nbsp;</div>
    <div class="contain_sub_row">
        <div class="contain_left_part">
            <p class="label_part">Pin/Zip <span></span></p>
            <div class="label_input_part">
                <input name="txtPinZip" id="txtPinZip" type="text" placeholder="" value="" />
            </div>
            <div class="clear"></div>
        </div>
        <div class="contain_left_part">
            <div class="clear"></div>
        </div>
        <div class="clear"></div>
    </div>
    <div>&nbsp;</div>
    <div>&nbsp;</div>
    <div class="contain_sub_row">
        <div class="contain_left_part">
            <p class="label_part">Location Incharge <span>*</span></p>
            <div class="label_combo_part">
                <select name="ddlLocationIncharge" id="ddlLocationIncharge"></select>
            </div>
            <div class="clear"></div>
        </div>
        <div class="contain_left_part">
            <p class="label_part">Designation <span></span></p>
            <div class="label_input_part">
                @*<input name="txtDesignation" disabled type="text" placeholder="RO value. Fetch from Emp Master" value="" />*@
                <input name="txtDesignation" id="txtDesignation" type="text" placeholder="" value="" />
            </div>
            <div class="clear"></div>
        </div>
        <div class="clear"></div>
    </div>
    <div>&nbsp;</div>
    <div class="contain_sub_row">
        <div class="contain_left_part">
            <p class="label_part">Landline No. <span>*</span></p>
            <div class="label_input_part">
                <input name="txtLandlineNo" id="txtLandlineNo" type="number" value="@Model.Phone" />
            </div>
            <div class="clear"></div>
        </div>
        <div class="contain_left_part">
            <p class="label_part">Mobile No. <span>*</span></p>
            <div class="label_input_part">
                <input name="txtMobile" id="txtMobile" type="number" value="@Model.Phone" />
            </div>
            <div class="clear"></div>
        </div>
        <div class="clear"></div>
    </div>
    <div>&nbsp;</div>
    <div class="contain_sub_row">
        <div class="contain_left_part">
            <p class="label_part">E-Mail ID <span>*</span></p>
            <div class="label_input_part">
                <input name="txtEmail" id="txtEmail" type="email" placeholder="" value="@Model.Email" />
            </div>
            <div class="clear"></div>
        </div>
        <div class="contain_left_part">
            <p class="label_part">Fax No. <span></span></p>
            <div class="label_input_part">
                <input name="txtFax" id="txtFax" type="number" value="@Model.Fax" />
            </div>
            <div class="clear"></div>
        </div>
        <div class="clear"></div>
    </div>
    <div>&nbsp;</div>
    <div>&nbsp;</div>
    <div class="contain_sub_row">
        <div class="contain_left_part">
            <p class="label_part">Working Hrs - From <span>*</span></p>
            <div class="label_input_part">
                <input name="txtWorkingTimeFrom" id="txtWorkingTimeFrom" type="number" value="@Model.WorkFrom" />
            </div>
            <div class="clear"></div>
        </div>
        <div class="contain_left_part">
            <p class="label_part">Working Hrs - To <span>*</span></p>
            <div class="label_input_part">
                <input name="txtWorkingTimeTo" id="txtWorkingTimeTo" type="number" value="@Model.WorksTill"/>
            </div>
            <div class="clear"></div>
        </div>
        <div class="clear"></div>
    </div>
    <div>&nbsp;</div>
    <div>&nbsp;</div>
    <div class="contain_sub_row">
        <div class="contain_left_part">
            <p class="label_part">Location Type <span>*</span></p>
            <div class="label_combo_part">
                <label class="label_radio">
                    <input name="chkRevenue" id="chkRevenue" type="checkbox" value="Revenue"  />
                    Revenue</label><br />
                        <label class="label_radio">
                            <input name="chkCounter" id="chkCounter" checked="@Model.IsARevenue" type="checkbox" value="Counter" />
                            Counter</label><br />
                        <label class="label_radio">
                            <input name="chkWorkshop" id="chkWorkShop" checked="@Model.IsAWorkShop" type="checkbox" value="Workshop" />
                            Workshop</label><br />
                        <label class="label_radio">
                            <input name="chkVirtual" type="checkbox" checked="@Model.IsAVirtual" id="chkVirtual" value="Virtual" />
                            Virtual</label>
            </div>
            <div class="clear"></div>
        </div>
        <div class="contain_left_part">
            <p class="label_part">Operations <span>*</span></p>
            <div class="label_combo_part">
                <label class="label_radio">
                    <input name="chkRenting" id="chkRenting" type="checkbox"  checked="@Model.RentingAllowed" value="Revenue" />
                    Renting Allowed</label><br />
                    <label class="label_radio">
                    <input name="chkLeasing" type="checkbox" id="chkLeasing" checked="@Model.LeasingAllowed" value="Counter" />
                    Leasing Allowed</label><br />   
            </div>
            <div class="clear"></div>
        </div>
        <div class="clear"></div>
        
    </div>
    <div>&nbsp;</div>
    <div>&nbsp;</div>
    <div class="contain_sub_row">
        <div class="contain_left_part">
            <p class="label_part">Receipt No. Start <span>*</span></p>
            <div class="label_input_part">
                <input name="txtRecNoStart" id="txtRecNoStart" type="text" placeholder="" value="@Model.ReciptNoStart" />
            </div>
            <div class="clear"></div>
        </div>
        <div class="contain_left_part">
            <p class="label_part">Receipt No. Current <span>*</span></p>
            <div class="label_input_part">
                <input name="txtRecNoCurrent" id="txtRecNoCurrent" type="text" placeholder="" value="@Model.ReceiptNoCurrent" />
            </div>
            <div class="clear"></div>
        </div>
        <div class="clear"></div>
    </div>
    <div>&nbsp;</div>
    <div class="contain_sub_row">
        <div class="contain_left_part">
            <p class="label_part">Rental Agmt No. Start <span>*</span></p>
            <div class="label_input_part">
                <input name="txtRentAgmtNoStart" id="txtRentAgmtNoStart" type="text" placeholder="" value="@Model.RentalAgreementNoCurrent" />
            </div>
            <div class="clear"></div>
        </div>
        <div class="contain_left_part">
            <p class="label_part">Rental Agmt No. Current <span>*</span></p>
            <div class="label_input_part">
                <input name="txtRentAgmtNoCurrent" id="txtRentAgmtNoCurrent" type="text" placeholder="" value="@Model.RentalAgreementNoCurrent" />
            </div>
            <div class="clear"></div>
        </div>
        <div class="clear"></div>
    </div>
    <div>&nbsp;</div>
    <div class="contain_sub_row">
        <div class="contain_left_part">
            <p class="label_part">Lease Agmt No. Start <span>*</span></p>
            <div class="label_input_part">
                <input name="txtLeaseAgmtNoStart" id="txtLeaseAgmtNoStart" type="text" placeholder="" value="@Model.LeaseAgreementNoStart" />
            </div>
            <div class="clear"></div>
        </div>
        <div class="contain_left_part">
            <p class="label_part">Lease Agmt No. Current <span>*</span></p>
            <div class="label_input_part">
                <input name="txtLeaseAgmtNoCurrent" id="txtLeaseAgmtNoCurrent" type="text" placeholder="" value="@Model.LeaseAgreementNoCurrent" />
            </div>
            <div class="clear"></div>
        </div>
        <div class="clear"></div>
        <div>&nbsp;</div>
                                            <div>&nbsp;</div>
         <div class="contain_sub_row">
                                            	<div class="contain_left_part">
                                                <p class="label_part">&nbsp;<span></span></p>
                                                    <div class="label_combo_part">
                                                        <label class="label_radio"><input name="chkLocActivate" checked="@Model.IsActive" id="chkLocActivate" type="checkbox" value="Activate"> Activate this Location</label>                                                        </div>
                                                    <div class="clear"></div>
                                                </div>
                                            	<div class="contain_left_part">
                                                    <p class="label_part">&nbsp;<span></span></p>
                                                    <div class="label_input_part">
                                                    </div>                                                    
                                                    <div class="clear"></div>
                                                </div>
                                            	<div class="clear"></div>                                                                                                
                                            </div>
    </div>
</div>
    
<div class="submit_part">
    <div class="contain_submit_row">
         @{ if (Model.LocationId > 0)
            { 
             <input type="button" id="btnSubmitUpdA4" class="submit_btn" value="Update" />
             <input type="button" id="btnAddNewA4" onclick="fnLocAddUpdate(0)" class="addnew_btn" value="Add New" />
             @*<input type="button" class="delete_btn" value="Delete" id="btnDeleteA4" />*@
            }
            else
            {<input type="button" id="btnSubmitA4" class="submit_btn" value="Submit" />} 
        }
        
    </div>
</div>
        </form>
   </div> 
<script>

    $('#btnSubmitA4').click(function () {
        
        if (locValidate()) {
           LocInsertUpdate();
        }
        else
            return false;
    });

    /* This is click event for country dropdown list to load */
    $('#ddlLocCountry').click(function () {
        if ($('#ddlLocCountry').text() == '') {
            getMasterData('Country', '#ddlLocCountry');
        }
    });

    $('#ddlLocStateEmirate').click(function () {
        if ($('#ddlLocStateEmirate').text() == '') {
            getMasterData('State', '#ddlLocStateEmirate');
        }
    });

    $('#ddlLocationIncharge').click(function () {
        if ($('#ddlLocationIncharge').text() == '') {
            getMasterData('LocationIn', '#ddlLocationIncharge');
        }
    });

    function getMasterData(str,ddlCtrl)
    {
        $.ajax({
            type: "POST",
            url: '@Url.Action("getMasterData")',
            data: { str: str },
            success: function (data) {
                $(ddlCtrl).empty();
                $.each(data, function () {
                    $(ddlCtrl).append($('<option />').attr('value', this.Value).text(this.Text));
                });
            }
        });
   }

    $('#btnSubmitUpdA4').click(function () {
        if (locValidate()) {
            LocInsertUpdate();
        }
        else
            return false;
    });

    function LocInsertUpdate()
    {
        var href = '@Url.Action("LocationInsert")';
        $.ajax({
            url: href,
            data: $('#frmLoc').serialize(),
            type: "POST",
            datatype: "json",
            traditional: true,
            success: function (data) {
               // alert('Successfully inserted.');
            },
            error: function (jqXhr, textStatus, errorThrown) {
                $('#errMsg').show();
                //alert("Error:Action is aborted.Please try again later.");
            }
        });
    }

    function locValidate()
    {
        if ($('#txtLocationName').val() != '' && $('#txtLocationCode').val() != '' && $('#txtAddressLine1').val() != '' && $('#txtAddressLine2').val() != '' && $('#ddlLocCountry').text() != '' && $('#ddlLocStateEmirate').text() != '' && $('#ddlLocationIncharge').text() != ''
           && $('#txtLandlineNo').val() != '' && $('#txtMobile').val() != '' && $('#txtEmail').val() != '' && $('#txtWorkingTimeFrom').val() != '' && $('#txtWorkingTimeTo').val() != '' && $('#txtRecNoStart').val() != '' && $('#txtRecNoCurrent').val() != '' && $('#txtRentAgmtNoStart').val() != '' && $('#txtRentAgmtNoCurrent').val() != '' && $('#txtLeaseAgmtNoStart').val() != '' && $('#txtLeaseAgmtNoCurrent').val() != '')
        {
            return true;} else {
            $('.error_msg_bg').css("display", "block");
            $('.error_msg_sm').css("display", "block");
            return false;
        }
    }
</script>
    